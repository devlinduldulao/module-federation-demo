{"version":3,"file":"94.js","sources":["webpack://products/./src/StreamingProductsCatalog.tsx","webpack://products/./src/lib/utils.ts"],"sourcesContent":["import { useState, useCallback, useMemo } from \"react\";\r\nimport { cn } from \"./lib/utils\";\r\nimport { Product, CartItem, FilterCategory } from \"./types\";\r\n\r\n// Simulate network delay for demonstration\r\nconst delay = (ms: number) => new Promise((resolve) => setTimeout(resolve, ms));\r\n\r\n// Enhanced mock data for conference demo\r\nconst MOCK_PRODUCTS: readonly Product[] = [\r\n  {\r\n    id: 1,\r\n    name: \"MacBook Pro M3\",\r\n    price: 2499.99,\r\n    category: \"electronics\",\r\n    image: \"\",\r\n    description:\r\n      \"Revolutionary performance with M3 chip. Perfect for developers and creators.\",\r\n  },\r\n  {\r\n    id: 2,\r\n    name: \"Designer Hoodie\",\r\n    price: 89.99,\r\n    category: \"clothing\",\r\n    image: \"\",\r\n    description: \"Premium organic cotton hoodie with modern minimalist design.\",\r\n  },\r\n  {\r\n    id: 3,\r\n    name: \"Clean Code\",\r\n    price: 45.99,\r\n    category: \"books\",\r\n    image: \"\",\r\n    description:\r\n      \"Robert C. Martin's masterpiece on writing maintainable software.\",\r\n  },\r\n  {\r\n    id: 4,\r\n    name: \"iPhone 15 Pro\",\r\n    price: 1199.99,\r\n    category: \"electronics\",\r\n    image: \"\",\r\n    description:\r\n      \"Titanium design with advanced camera system and A17 Pro chip.\",\r\n  },\r\n  {\r\n    id: 5,\r\n    name: \"Denim Jacket\",\r\n    price: 129.99,\r\n    category: \"clothing\",\r\n    image: \"\",\r\n    description:\r\n      \"Vintage-inspired denim jacket crafted from sustainable materials.\",\r\n  },\r\n  {\r\n    id: 6,\r\n    name: \"System Design\",\r\n    price: 59.99,\r\n    category: \"books\",\r\n    image: \"\",\r\n    description:\r\n      \"Learn how to design large-scale distributed systems like a pro.\",\r\n  },\r\n  {\r\n    id: 7,\r\n    name: \"AirPods Pro\",\r\n    price: 249.99,\r\n    category: \"electronics\",\r\n    image: \"\",\r\n    description:\r\n      \"Adaptive Audio with Transparency and Active Noise Cancellation.\",\r\n  },\r\n  {\r\n    id: 8,\r\n    name: \"Cargo Pants\",\r\n    price: 79.99,\r\n    category: \"clothing\",\r\n    image: \"\",\r\n    description:\r\n      \"Technical cargo pants with multiple pockets and water resistance.\",\r\n  },\r\n] as const;\r\n\r\nconst CATEGORIES: readonly FilterCategory[] = [\r\n  \"all\",\r\n  \"electronics\",\r\n  \"clothing\",\r\n  \"books\",\r\n] as const;\r\n\r\n// Resource-based Suspense pattern for React 18+\r\ninterface Resource<T> {\r\n  read(): T;\r\n}\r\n\r\nfunction createResource<T>(asyncFn: () => Promise<T>): Resource<T> {\r\n  let status = \"pending\";\r\n  let result: T;\r\n  let suspender = asyncFn().then(\r\n    (data) => {\r\n      status = \"success\";\r\n      result = data;\r\n    },\r\n    (error) => {\r\n      status = \"error\";\r\n      result = error;\r\n    }\r\n  );\r\n\r\n  return {\r\n    read() {\r\n      if (status === \"pending\") {\r\n        throw suspender;\r\n      } else if (status === \"error\") {\r\n        throw result;\r\n      } else if (status === \"success\") {\r\n        return result;\r\n      }\r\n      throw new Error(\"Invalid resource state\");\r\n    },\r\n  };\r\n}\r\n\r\n// Global resource cache with proper invalidation\r\nconst resourceCache = new Map<string, Resource<void>>();\r\n\r\nfunction getResource(key: string, delayMs: number): Resource<void> {\r\n  if (!resourceCache.has(key)) {\r\n    const resource = createResource(() => delay(delayMs));\r\n    resourceCache.set(key, resource);\r\n  }\r\n  return resourceCache.get(key)!;\r\n}\r\n\r\nfunction clearResourceCache() {\r\n  resourceCache.clear();\r\n}\r\n\r\n// Module-specific resource keys\r\nlet currentResourceKey = \"products-initial\";\r\n\r\n// Modern Suspense component following React 18+ best practices\r\nconst StreamingProductsCatalog = () => {\r\n  const resource = getResource(currentResourceKey, 2500);\r\n  resource.read();\r\n  return <ProductsCatalog />;\r\n};\r\n\r\nfunction ProductsCatalog() {\r\n  const [selectedCategory, setSelectedCategory] =\r\n    useState<FilterCategory>(\"all\");\r\n\r\n  const filteredProducts = useMemo(() => {\r\n    return MOCK_PRODUCTS.filter(\r\n      (product) =>\r\n        selectedCategory === \"all\" || product.category === selectedCategory\r\n    );\r\n  }, [selectedCategory]);\r\n\r\n  const handleCategoryChange = useCallback((category: FilterCategory) => {\r\n    setSelectedCategory(category);\r\n  }, []);\r\n\r\n  const handleAddToCart = useCallback((product: Product) => {\r\n    const cartItem: CartItem = {\r\n      id: product.id,\r\n      name: product.name,\r\n      price: product.price,\r\n      quantity: 1,\r\n    };\r\n\r\n    try {\r\n      window.dispatchEvent(\r\n        new CustomEvent(\"addToCart\", {\r\n          detail: cartItem,\r\n          bubbles: true,\r\n        })\r\n      );\r\n\r\n      window.dispatchEvent(\r\n        new CustomEvent(\"showNotification\", {\r\n          detail: {\r\n            type: \"success\",\r\n            message: `${product.name} added to cart`,\r\n          },\r\n        })\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Failed to add item to cart:\", error);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"w-full max-w-6xl mx-auto\" role=\"main\">\r\n      {/* Header — editorial style */}\r\n      <header className=\"mb-14 animate-fade-in-up\">\r\n        <div className=\"flex items-end justify-between mb-8\">\r\n          <div>\r\n            <span className=\"font-mono text-[11px] tracking-[0.3em] text-dim uppercase block mb-3\">\r\n              Curated Selection\r\n            </span>\r\n            <h2 className=\"font-display text-5xl lg:text-6xl italic text-cream tracking-tight leading-none\">\r\n              Premium Collection\r\n            </h2>\r\n          </div>\r\n          <span className=\"font-mono text-sm text-dim hidden lg:block\">\r\n            {filteredProducts.length} items\r\n          </span>\r\n        </div>\r\n\r\n        {/* Filter divider bar */}\r\n        <nav\r\n          className=\"flex items-center gap-6 border-t border-b border-edge py-4\"\r\n          role=\"navigation\"\r\n          aria-label=\"Product category filters\"\r\n        >\r\n          {CATEGORIES.map((category) => (\r\n            <button\r\n              key={category}\r\n              onClick={() => handleCategoryChange(category)}\r\n              className={cn(\r\n                \"font-mono text-xs tracking-wider uppercase transition-all duration-300 focus:outline-hidden relative pb-0.5\",\r\n                selectedCategory === category\r\n                  ? \"text-citrine\"\r\n                  : \"text-dim hover:text-stone\"\r\n              )}\r\n              aria-pressed={selectedCategory === category}\r\n              aria-label={`Filter by ${category}`}\r\n            >\r\n              {category}\r\n              {selectedCategory === category && (\r\n                <span className=\"absolute -bottom-[17px] left-0 w-full h-[1px] bg-citrine\" />\r\n              )}\r\n            </button>\r\n          ))}\r\n        </nav>\r\n      </header>\r\n\r\n      {/* Product grid — 1px gap grid creates sharp editorial lines */}\r\n      <section aria-label=\"Products grid\">\r\n        {filteredProducts.length > 0 ? (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-[1px] bg-edge\">\r\n            {filteredProducts.map((product, index) => (\r\n              <article\r\n                key={product.id}\r\n                className=\"group bg-noir p-6 transition-all duration-500 hover:bg-surface relative animate-fade-in-up\"\r\n                style={{ animationDelay: `${index * 80}ms` }}\r\n                role=\"article\"\r\n                aria-label={`Product: ${product.name}`}\r\n              >\r\n                {/* Image placeholder — geometric */}\r\n                <div className=\"aspect-square bg-surface mb-5 relative overflow-hidden group-hover:bg-elevated transition-colors duration-500\">\r\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                    <span className=\"font-mono text-[10px] tracking-wider text-dim group-hover:text-stone transition-colors\">\r\n                      {product.category.toUpperCase().slice(0, 4)}\r\n                    </span>\r\n                  </div>\r\n                  {/* Hover reveal line */}\r\n                  <div className=\"absolute bottom-0 left-0 w-full h-[1px] bg-citrine transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left\" />\r\n                </div>\r\n\r\n                {/* Category label */}\r\n                <span className=\"font-mono text-[10px] tracking-[0.2em] text-dim uppercase block mb-2\">\r\n                  {product.category}\r\n                </span>\r\n\r\n                {/* Product name — serif */}\r\n                <h3 className=\"font-display text-xl italic text-cream mb-2 group-hover:text-citrine transition-colors duration-300\">\r\n                  {product.name}\r\n                </h3>\r\n\r\n                {/* Description */}\r\n                <p className=\"text-stone text-sm leading-relaxed line-clamp-2 mb-5\">\r\n                  {product.description}\r\n                </p>\r\n\r\n                {/* Price + CTA */}\r\n                <div className=\"flex items-center justify-between pt-4 border-t border-edge\">\r\n                  <span className=\"font-mono text-lg text-cream tracking-tight\">\r\n                    ${product.price.toLocaleString()}\r\n                  </span>\r\n                  <button\r\n                    onClick={() => handleAddToCart(product)}\r\n                    className=\"group/btn px-4 py-2 bg-transparent border border-edge text-stone font-mono text-[11px] tracking-wider uppercase hover:border-citrine hover:text-citrine hover:bg-citrine/5 transition-all duration-300 focus:outline-hidden relative overflow-hidden\"\r\n                    aria-label={`Add ${product.name} to cart`}\r\n                  >\r\n                    <span className=\"relative z-10 flex items-center gap-2\">\r\n                      <span>Add</span>\r\n                      <span className=\"transition-transform duration-300 group-hover/btn:translate-x-1\">\r\n                        &rarr;\r\n                      </span>\r\n                    </span>\r\n                  </button>\r\n                </div>\r\n              </article>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-center py-24 animate-fade-in-up\">\r\n            <div className=\"w-16 h-16 border border-edge mx-auto mb-6 flex items-center justify-center\">\r\n              <span className=\"font-mono text-[10px] text-dim\">EMPTY</span>\r\n            </div>\r\n            <h3 className=\"font-display text-2xl italic text-cream mb-3\">\r\n              No products found\r\n            </h3>\r\n            <p className=\"text-stone text-sm\">\r\n              Try selecting a different category\r\n            </p>\r\n          </div>\r\n        )}\r\n      </section>\r\n\r\n      {/* Module boundary indicator */}\r\n      <div className=\"mt-12 pt-6 border-t border-edge animate-fade-in-up\" style={{ animationDelay: \"600ms\" }}>\r\n        <div className=\"flex items-center gap-3\">\r\n          <span className=\"w-1.5 h-1.5 rounded-full bg-citrine animate-subtle-pulse\" />\r\n          <span className=\"font-mono text-[11px] tracking-wider text-dim\">\r\n            PRODUCTS MICRO-FRONTEND &middot; PORT 3001 &middot; INDEPENDENTLY DEPLOYED\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nProductsCatalog.displayName = \"ProductsCatalog\";\r\n\r\nexport default StreamingProductsCatalog;\r\n","import { clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\nimport type { ClassValue } from \"clsx\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n"],"names":["MOCK_PRODUCTS","CATEGORIES","resourceCache","Map","ProductsCatalog","selectedCategory","setSelectedCategory","useState","filteredProducts","useMemo","product","handleCategoryChange","useCallback","category","handleAddToCart","cartItem","window","CustomEvent","error","console","cn","index","resource","getResource","key","delayMs","result","status","suspender","asyncFn","Promise","resolve","setTimeout","data","Error","inputs","twMerge","clsx"],"mappings":"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"}